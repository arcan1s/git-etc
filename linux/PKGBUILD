# Author: Evgeniy "arcanis" Alexeev <esalexeev@gmail.com>
# Maintainer: Evgeniy "arcanis" Alexeev <esalexeev@gmail.com>

pkgname=git-etc
pkgver=20130406
pkgrel=1
pkgdesc=" Simple daemon for monitoring changes in files "
url="https://github.com/arcan1s/git-etc"
license=("GPL")
arch=('i686' 'x86_64')
depends=('git' 'bash')
optdepends=('python2-pyqt: for GUI')

backup=('etc/conf.d/git-etc.conf')

_gitroot="git://github.com/arcan1s/git-etc.git"
_gitname="git-etc"

build() {
  if [ -d $srcdir/$_gitname ]
  then
    msg "Updating local repository"
    cd $srcdir/$_gitname && git pull
  else
    git clone $_gitroot
    cd $_gitname
  fi
}

package() {
  install -D -m755 $srcdir/$_gitname/linux/git-etc $pkgdir/usr/bin/git-etc
  install -D -m755 $srcdir/$_gitname/linux/ctrlconf.py $pkgdir/usr/bin/ctrlconf
  
  install -D -m644 $srcdir/$_gitname/linux/git-etc.service $pkgdir/usr/lib/systemd/system/git-etc.service
  install -D -m644 $srcdir/$_gitname/linux/git-etc.conf $pkgdir/etc/conf.d/git-etc.conf
  
  install -D -m644 $srcdir/$_gitname/linux/git-etc.1 $pkgdir/usr/share/man/man1/git-etc.1
  install -D -m644 $srcdir/$_gitname/linux/ctrlconf.1 $pkgdir/usr/share/man/man1/ctrlconf.1
  install -D -m644 $srcdir/$_gitname/linux/git-etc.conf.5 $pkgdir/usr/share/man/man5/git-etc.conf.5
} 
